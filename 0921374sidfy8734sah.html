<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>VisionWave Baccarat</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
:root{
  --bg1:#060709; --bg2:#0b1220;
  --accent:#00bfff; --accent2:#00ffff;
  --muted:#9aa0a6; --base-font:16px; --scale:1;
}
html{font-size:var(--base-font);}
body{
  font-family:'Orbitron',sans-serif;
  background:radial-gradient(1200px 600px at 10% 10%,rgba(0,43,60,.35) 0%,transparent 10%), 
             linear-gradient(180deg,var(--bg1) 0%,var(--bg2) 100%);
  color:#e9f6ff;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  padding:36px;
  user-select:none;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
.container{
  width:90%;
  max-width:450px;
  min-width:300px;
  background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));
  border-radius:16px;
  padding:calc(22px * var(--scale));
  box-shadow:0 10px 40px rgba(0,0,0,.6),0 0 40px rgba(0,191,255,.06) inset;
  border:1px solid rgba(0,191,255,.08);
  backdrop-filter:blur(6px) saturate(120%);
  position:relative;
  overflow:hidden;
  font-size:1rem;
}
.container::before{
  content:"";
  position:absolute;
  inset:-40% -20% auto -20%;
  height:300px;
  background:linear-gradient(90deg,transparent,rgba(0,191,255,.06),transparent);
  transform:rotate(-12deg);
  animation:slide 8s linear infinite;
  pointer-events:none;
}
@keyframes slide{
  0%{transform:translateX(-40%) rotate(-12deg)}
  50%{transform:translateX(40%) rotate(-12deg)}
  100%{transform:translateX(-40%) rotate(-12deg)}
}
.title{
  font-size:calc(26px * var(--scale)); 
  text-align:center;
  color:var(--accent);
  font-weight:700;
  text-shadow:0 0 14px rgba(0,191,255,.2),0 0 28px rgba(0,191,255,.08);
  margin-bottom:14px;
}
.progress-wrap{margin-bottom:12px}
.progress-bar-outer{
  height:calc(28px * var(--scale));
  background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(0,0,0,.18));
  border-radius:calc(14px * var(--scale));
  overflow:hidden;
  border:1px solid rgba(0,191,255,.06);
  box-shadow:inset 0 2px 6px rgba(0,0,0,.6);
}
.progress-bar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,var(--accent),var(--accent2));
  transition:width .35s ease-in-out;
  box-shadow:0 6px 22px rgba(0,191,255,.12) inset;
}
.progress-text{
  margin-top:8px;
  text-align:center;
  color:var(--muted);
  font-size:calc(13px * var(--scale));
}
.history{
  margin-top:14px;
  background:rgba(10,12,16,.45);
  border-radius:calc(10px * var(--scale));
  padding:calc(12px * var(--scale));
  box-shadow:inset 0 1px 6px rgba(0,0,0,.6);
  min-height:64px;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-wrap:wrap;
  gap:calc(8px * var(--scale));
  font-size:calc(16px * var(--scale));
  border:1px solid rgba(255,255,255,.02);
}
.pill{
  padding:calc(7px * var(--scale)) calc(12px * var(--scale));
  border-radius:calc(8px * var(--scale));
  font-weight:700;
  color:#fff;
  box-shadow:0 6px 16px rgba(0,0,0,.45)
}
.pill.p{background:linear-gradient(180deg,#1e88e5,#1566b3)}
.pill.b{background:linear-gradient(180deg,#d32f2f,#9b2121)}
.prediction{
  margin-top:calc(18px * var(--scale));
  padding:calc(18px * var(--scale));
  border-radius:calc(12px * var(--scale));
  background:linear-gradient(180deg,rgba(255,255,255,.01),rgba(255,255,255,.02));
  border:1px solid rgba(0,191,255,.06);
  box-shadow:0 8px 30px rgba(0,191,255,.03);
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:center;
}
.prediction h3{margin-bottom:calc(8px * var(--scale));font-size:calc(20px * var(--scale));color:var(--accent);}
.prediction .pred{
  font-size:calc(30px * var(--scale));
  font-weight:700;
  color:#fff;
  text-shadow:0 0 8px rgba(0,191,255,.06);
}
.suggestion{
  margin-top:calc(10px * var(--scale));
  color:var(--accent2);
  font-weight:700;
  font-size:calc(16px * var(--scale));
}
.message{
  margin-top:calc(22px * var(--scale));
  text-align:center;
  font-size:calc(18px * var(--scale));
  min-height:40px;
}
.message .win{color:#00ffd1;text-shadow:0 0 18px rgba(0,255,209,.12);font-weight:800}
.message .fail{color:#ff6b6b;text-shadow:0 0 14px rgba(255,107,107,.08);font-weight:800}
.controls{
  display:flex;
  gap:calc(12px * var(--scale));
  margin-top:calc(18px * var(--scale));
}
.controls button{
  flex:1;
  padding:calc(12px * var(--scale)) calc(10px * var(--scale));
  border-radius:calc(10px * var(--scale));
  border:none;
  cursor:pointer;
  font-weight:800;
  font-size:calc(15px * var(--scale));
  letter-spacing:.6px;
  box-shadow:0 6px 18px rgba(0,0,0,.45);
  transition:transform .16s ease,box-shadow .16s;
}
.controls button:hover{transform:translateY(-4px)}
.btn-p{background:linear-gradient(180deg,#5fb7ff,#1e88e5);color:#001224}
.btn-b{background:linear-gradient(180deg,#ff9b9b,#d32f2f);color:#210000}
.btn-undo{background:linear-gradient(180deg,#b98bff,#6a1b9a);color:#fff}
.btn-reset{background:linear-gradient(180deg,#ffec88,#fbc02d);color:#111}
.reset-only{display:flex;justify-content:center;margin-top:calc(18px * var(--scale));}
.reset-only button{padding:calc(12px * var(--scale)) calc(18px * var(--scale));border-radius:calc(10px * var(--scale));border:none;background:linear-gradient(180deg,#ffec88,#fbc02d);font-weight:800;cursor:pointer}

@media (max-width:450px){html{--scale:0.85;}}
@media (max-width:350px){html{--scale:0.7;}}
@media (max-width:300px){html{--scale:0.6;}}
</style>
</head>
<body>

<script>
  // ================= APP KEY SESSION CHECK =================
  const loggedIn = localStorage.getItem('loggedIn');
  const allowedApp = localStorage.getItem('allowedApp');
  const expiresAt = Number(localStorage.getItem('expiresAt'));

  if(loggedIn !== 'true' || allowedApp !== '0921374sidfy8734sah' || (expiresAt && expiresAt < Date.now())) {
      alert("Please login first!");
      localStorage.removeItem('loggedIn');
      localStorage.removeItem('allowedApp');
      localStorage.removeItem('expiresAt');
      window.location.href = "index.html";
  }
</script>

<div class="container" id="app">
  <div class="title">VisionWave Baccarat PRO</div>
  <div class="progress-wrap" id="progressContainer">
    <div class="progress-bar-outer"><div class="progress-bar" id="progressBar"></div></div>
    <div class="progress-text" id="progressText">0% - Record 25 entries to calculate prediction</div>
  </div>
  <div class="history" id="historyArea">
    <div id="historyDisplay" style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;justify-content:center"></div>
  </div>
  <div class="prediction" id="predictionCard">
    <div class="pred" id="predictionText"></div>
    <div class="suggestion" id="suggestionText"></div>
  </div>
  <div class="message" id="messageArea"></div>
  <div class="controls" id="controlsRow">
    <button class="btn-p" id="btnP"><i class="fas fa-user"></i> Player</button>
    <button class="btn-b" id="btnB"><i class="fas fa-landmark"></i> Banker</button>
    <button class="btn-undo" id="btnUndo"><i class="fas fa-undo"></i> Undo</button>
    <button class="btn-reset" id="btnReset"><i class="fas fa-redo"></i> Reset</button>
  </div>
</div>

<script>
(function(){
  const MAX_ENTRIES = 25, steps = [100,200,600,1400,3000,6200];
  let hist = [], step = 0, pred = "", done = false, undoStack = [];
  const bar = document.getElementById("progressBar"),
        barTxt = document.getElementById("progressText"),
        histDisp = document.getElementById("historyDisplay"),
        predCard = document.getElementById("predictionCard"),
        predTxt = document.getElementById("predictionText"),
        suggTxt = document.getElementById("suggestionText"),
        msg = document.getElementById("messageArea"),
        ctr = document.getElementById("controlsRow"),
        prog = document.getElementById("progressContainer"),
        histBox = document.getElementById("historyArea");

  function snap(){ return { h:[...hist], step, pred, done, ui:{ w:bar.style.width,t:barTxt.textContent,h:histDisp.innerHTML, show:predCard.style.display,text:predTxt.textContent,sug:suggTxt.textContent,msg:msg.innerHTML,ctrl:ctr.innerHTML,prog:prog.style.display,his:histBox.style.display } }; }
  function restore(s){ hist=[...s.h]; step=s.step; pred=s.pred; done=s.done; bar.style.width=s.ui.w; barTxt.textContent=s.ui.t; histDisp.innerHTML=s.ui.h; predCard.style.display=s.ui.show; predTxt.textContent=s.ui.text; suggTxt.textContent=s.ui.sug; msg.innerHTML=s.ui.msg; ctr.innerHTML=s.ui.ctrl; prog.style.display=s.ui.prog; histBox.style.display=s.ui.his; bind(); }

  function ui(){
    const last8=hist.slice(-8);
    histDisp.innerHTML=last8.map(v=>`<div class="pill ${v==='P'?'p':'b'}">${v}</div>`).join("");
    const pct = Math.min(Math.round(hist.length/MAX_ENTRIES*100),100);
    bar.style.width = pct+"%";
    barTxt.textContent = hist.length<MAX_ENTRIES ? `${pct}% - Record 25 entries to calculate prediction` : "âœ… Prediction ready!";
    if(pred){ predTxt.textContent=pred; suggTxt.textContent=`ðŸ’¡ Suggested Bet: ${steps[step]}`; predCard.style.display="flex"; } 
    else { predCard.style.display="none"; predTxt.textContent=""; suggTxt.textContent=""; }
    if(!done) msg.innerHTML="";
  }

  function makePred(){
    const trend = hist.slice(-25);
    if(trend.length < MAX_ENTRIES) return;
    let momentum = trend.reduce((acc,val,i)=> acc + (val==='P'?1:-1)*(i+1),0);
    let last = trend[trend.length-1], streak=1;
    for(let i=trend.length-2;i>=0;i--){ if(trend[i]===last) streak++; else break; }
    let reversal = streak >= 3 ? -1 : 1;
    let lead = trend.filter(x=>'P'===x).length - trend.filter(x=>'B'===x).length;
    let seqCounts={};
    for(let i=0;i<=trend.length-3;i++){ let seq = trend.slice(i,i+3).join(''); seqCounts[seq] = (seqCounts[seq]||0)+1; }
    let lastSeq = trend.slice(-3).join(''); let seqBoost = seqCounts[lastSeq]>1 ? 1 : 0;
    let score = momentum*0.4 + reversal*1 + lead*0.2 + seqBoost*0.5;
    pred = score >= 0 ? "Player" : "Banker";
    predCard.style.display="flex";
    predTxt.textContent = pred;
    if(step>=steps.length) step=0;
    suggTxt.textContent = `ðŸ’¡ Suggested Bet: ${steps[step]}`;
  }

  function end(text,type){
    msg.innerHTML=`<div class="${type}">${text}</div>`;
    prog.style.display="none"; histBox.style.display="none"; predCard.style.display="none";
    ctr.innerHTML=`<div class="reset-only"><button class="btn-reset" id="endReset"><i class="fas fa-redo"></i> Reset</button></div>`;
    document.getElementById("endReset").onclick=reset;
    done=true;
  }

  function record(r){
    if(done) return;
    undoStack.push(snap());
    hist.push(r); ui();
    if(hist.length >= MAX_ENTRIES && !pred){ makePred(); return; }
    if(pred){
      const win = (pred==="Player" && r==="P") || (pred==="Banker" && r==="B");
      if(win){ end("ðŸŽ‰ Congrats! You won! Click Reset to play again.","win"); return; }
      step++;
      if(step < steps.length){ suggTxt.textContent = `ðŸ’¡ Suggested Bet: ${steps[step]}`; }
      else { end("âŒ FAIL! Please click Reset to try again.","fail"); return; }
      makePred();
    }
  }

  function undo(){ if(!undoStack.length) return; restore(undoStack.pop()); }

  function reset(){
    hist=[]; step=0; pred=""; done=false; undoStack=[];
    bar.style.width="0%"; barTxt.textContent="0% - Record 25 entries to calculate prediction";
    histDisp.innerHTML=""; predTxt.textContent=""; suggTxt.textContent=""; predCard.style.display="none"; msg.innerHTML="";
    prog.style.display=""; histBox.style.display="";
    ctr.innerHTML=`<button class="btn-p" id="btnP"><i class="fas fa-user"></i> Player</button>
                   <button class="btn-b" id="btnB"><i class="fas fa-landmark"></i> Banker</button>
                   <button class="btn-undo" id="btnUndo"><i class="fas fa-undo"></i> Undo</button>
                   <button class="btn-reset" id="btnReset"><i class="fas fa-redo"></i> Reset</button>`;
    bind();
  }

  function bind(){
    const p=document.getElementById("btnP"),b=document.getElementById("btnB"), u=document.getElementById("btnUndo"),r=document.getElementById("btnReset");
    if(p)p.onclick=()=>record("P");
    if(b)b.onclick=()=>record("B");
    if(u)u.onclick=undo;
    if(r)r.onclick=reset;
  }

  document.addEventListener("keydown",e=>{
    if(e.key.toUpperCase()==="P") record("P");
    if(e.key.toUpperCase()==="B") record("B");
    if(e.key==="z"&&(e.ctrlKey||e.metaKey)) undo();
  });

  bind(); ui();

  // Disable right-click and devtools
  document.addEventListener('contextmenu',e=>e.preventDefault());
  document.addEventListener('keydown',e=>{
    if(e.key==="F12"||(e.ctrlKey&&["U","Shift","I","J","C"].includes(e.key.toUpperCase()))){e.preventDefault();}
  });

})();
</script>

</body>
</html>
