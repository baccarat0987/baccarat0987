<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Baccarat PRO</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --player:#4169E1;
  --banker:#800080;
  --tie:#FFD700;
  --sub:#FFFFFF;
  --glass:rgba(20,20,20,0.85);
  --ink:#FFFFFF;
}
*{margin:0;padding:0;box-sizing:border-box;}
body{
  background:radial-gradient(circle at 40% 20%,#000000 0%,#111111 100%);
  font-family:Inter,Arial,sans-serif;
  color:var(--ink);
  padding:22px 12px 140px;
}
.card{
  max-width:500px;
  margin:0 auto;
  background: var(--glass);
  border:1px solid #fff;
  border-radius:20px;
  padding:38px 34px 46px;
  backdrop-filter:blur(10px) saturate(230%);
  box-shadow:0 6px 14px rgba(0,0,0,.08);
}
h1{
  text-align:center;
  font-size:1.6rem;
  font-weight:600;
  margin-bottom:16px;
  letter-spacing:.35px;
  background:linear-gradient(90deg,var(--player),var(--banker),var(--tie),var(--sub));
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}
.stats{
  display:flex;
  justify-content:space-between;
  font-size:.9rem;
  margin-bottom:4px;
}
.label, .msg, .first-six, #history{color:var(--sub);}
.predict{text-align:center;margin-bottom:24px;}
.pred-label{
  font-size:2.2rem;
  font-weight:700;
  padding:6px 22px;
  border-radius:14px;
  position:relative;
  backdrop-filter:blur(6px) saturate(200%);
}
.pred-label.player{color:var(--player);}
.pred-label.banker{color:var(--banker);}
.pred-label.tie{color:var(--tie);}
.pred-label::after{
  content:'';
  position:absolute;
  inset:-5px;
  border-radius:16px;
  border:2px solid currentColor;
  opacity:.28;
  animation:pulse 2s infinite;
}
@keyframes pulse{0%{opacity:.28}50%{opacity:.1}100%{opacity:.28}}
.conf-wrap{margin-top:14px;width:100%;max-width:260px;margin-inline:auto;}
.conf-bar{height:8px;border-radius:6px;background:rgba(255,255,255,0.1);overflow:hidden;}
.conf-fill{height:100%;width:0;background:linear-gradient(90deg,var(--player),var(--banker));}
.conf-val{text-align:center;font-size:.9rem;margin-top:6px;color:var(--sub);}
.btn-row{display:flex;gap:14px;margin-bottom:30px;flex-wrap:wrap;}
button{
  flex:1;min-width:96px;padding:13px 0;
  border-radius:999px;border:1.4px solid currentColor;
  font-weight:600;font-size:.9rem;
  background:rgba(255,255,255,.24);
  backdrop-filter:blur(8px) saturate(160%);
  cursor:pointer;transition:filter .2s;
}
button:hover:enabled{filter:brightness(1.1);}
button:disabled{opacity:0.4;cursor:not-allowed;}
.btn-player{color:var(--player);}
.btn-banker{color:var(--banker);}
.btn-tie{color:var(--tie);}
.btn-reset{color:var(--sub);border-color:var(--sub);}
.first-six{
  font-size:1.18rem;text-align:center;margin-top:10px;
  letter-spacing:.33rem;
}
.msg{text-align:center;margin-bottom:14px;}
.w{color:var(--player);font-weight:700;}
.l{color:var(--banker);font-weight:700;}
.t{color:var(--tie);font-weight:700;}
.dash{color:var(--sub);}
.hidden{display:none;}

#setup-overlay{
  position:fixed; inset:0;
  background:rgba(0,0,0,0.5);
  display:flex; justify-content:center; align-items:center;
  z-index:1000;
}
#setup-overlay div{
  background:rgba(255,255,255,0.1);
  padding:30px;
  border-radius:15px;
  backdrop-filter:blur(8px);
  text-align:center;
}
#setup-overlay input{
  width:100px;padding:5px;border-radius:5px;border:none;
  font-size:1rem;text-align:center;
}
#setup-overlay button{
  padding:10px 20px;border-radius:10px;
  font-weight:600;cursor:pointer;margin-top:10px;
}
</style>
</head>
<body>

<div id="setup-overlay">
  <div>
    <h2>Set Bankroll & Base Bet</h2>
    <label>Bankroll: $<input type="number" id="input-bankroll" value="1000"></label><br><br>
    <label>Next Bet: $<input type="number" id="input-bet" value="100"></label><br><br>
    <button id="start-btn">Start</button>
  </div>
</div>

<div class="card">
  <h1>Baccarat PRO</h1>

  <div class="stats">
    <span id="bankroll"><span class="label">Bankroll:</span> $1000</span>
    <span id="next-bet"><span class="label">Next Bet:</span> $100</span>
  </div>

  <div class="predict hidden" id="prediction-box">
    <span id="prediction" class="pred-label player">Player</span>
    <div class="conf-wrap">
      <div class="conf-bar"><div id="bar" class="conf-fill"></div></div>
      <div id="val" class="conf-val">0%</div>
    </div>
  </div>

  <div id="waitmsg" class="msg">Enter six results to activate prediction</div>
  <div id="bankroll-msg" class="msg"></div>

  <div class="btn-row">
    <button type="button" class="btn-player">Player</button>
    <button type="button" class="btn-tie">Tie</button>
    <button type="button" class="btn-banker">Banker</button>
    <button type="button" class="btn-reset">Reset</button>
  </div>

  <div id="history" class="first-six"></div>
</div>

<script>
// âœ… SESSION CHECK
const loggedIn = localStorage.getItem('loggedIn');
const allowedApp = localStorage.getItem('allowedApp');
const expiresAt = Number(localStorage.getItem('expiresAt'));

if (loggedIn !== 'true' || allowedApp !== 'podjkmapoda983oisjad' || (expiresAt && expiresAt < Date.now())) {
    alert("Please login first!");
    localStorage.removeItem('loggedIn');
    localStorage.removeItem('allowedApp');
    localStorage.removeItem('expiresAt');
    window.location.href = "index.html";
}

// --- Baccarat PRO Logic ---
let bankroll=1000, baseBet=100, currentBet=100;
let cumulativeLoss=0, winCount=0, lossStreak=0;
let maxLoss=6, targetProfitMultiplier=1.8;
let targetProfit=0, history=[], aiPrediction=null;

const bankrollEl=document.getElementById("bankroll");
const nextBetEl=document.getElementById("next-bet");
const historyEl=document.getElementById("history");
const predictionBox=document.getElementById("prediction-box");
const predictionLabel=document.getElementById("prediction");
const bar=document.getElementById("bar");
const val=document.getElementById("val");
const waitmsg=document.getElementById("waitmsg");
const bankrollMsg=document.getElementById("bankroll-msg");

const btnPlayer=document.querySelector(".btn-player");
const btnBanker=document.querySelector(".btn-banker");
const btnTie=document.querySelector(".btn-tie");
const betButtons=[btnPlayer,btnBanker,btnTie];

const overlay=document.getElementById("setup-overlay");
const inputBankroll=document.getElementById("input-bankroll");
const inputBet=document.getElementById("input-bet");
const startBtn=document.getElementById("start-btn");

window.onload=()=>overlay.style.display="flex";

startBtn.onclick=()=>{
  bankroll=parseInt(inputBankroll.value)||1000;
  baseBet=currentBet=parseInt(inputBet.value)||100;
  targetProfit=bankroll*targetProfitMultiplier;
  resetState();
  overlay.style.display="none";
};

function resetState(){
  cumulativeLoss=0;winCount=0;lossStreak=0;
  history=[];aiPrediction=null;
  historyEl.innerHTML="";
  predictionBox.classList.add("hidden");
  waitmsg.classList.remove("hidden");
  bankrollMsg.textContent="";
  betButtons.forEach(b=>b.disabled=false);
  updateBankroll();updateNextBet();
}

function updateBankroll(){ bankrollEl.innerHTML=`<span class="label">Bankroll:</span> $${bankroll}`; }
function updateNextBet(){ nextBetEl.textContent=`Next Bet: $${currentBet}`; }

function addHistory(result,outcome="neutral"){
  history.push({result,outcome});
  if(history.length>10) history.shift();
  historyEl.innerHTML=history.map(h=>{
    if(h.result==="Tie")return `<span class="t">T</span>`;
    if(h.outcome==="win")return `<span class="w">${h.result[0]}</span>`;
    if(h.outcome==="loss")return `<span class="l">${h.result[0]}</span>`;
    return `<span class="dash">${h.result[0]}</span>`;
  }).join(" ");
}

function animateConfidence(num){
  let c=0,inc=num/20;
  (function run(){c+=inc;if(c>num)c=num;bar.style.width=c+"%";val.textContent=c.toFixed(1)+"%";if(c<num)requestAnimationFrame(run);})();
}

function makePrediction(){
  let p=0,b=0,decay=.95;
  history.forEach((h,i)=>{ let f=Math.pow(decay,history.length-i-1); if(h.result==="Player")p+=f; if(h.result==="Banker")b+=f; });
  if(!p&&!b)return;
  aiPrediction=Math.random()<p/(p+b)?"Player":"Banker";
  predictionLabel.textContent=aiPrediction;
  predictionLabel.className="pred-label "+aiPrediction.toLowerCase();
  predictionBox.classList.remove("hidden");
  waitmsg.classList.add("hidden");
  animateConfidence((aiPrediction==="Player"?p:b)/(p+b)*100);
}

function calculateNextBet(){ if(lossStreak>0){ let aggressive=(cumulativeLoss+baseBet)*1.5; return Math.min(Math.ceil(aggressive), bankroll); } return baseBet; }

function resetGame(){
  overlay.style.display="flex";
  bankroll=parseInt(inputBankroll.value)||1000;
  baseBet=currentBet=parseInt(inputBet.value)||100;
  targetProfit=bankroll*targetProfitMultiplier;
  resetState();
}

function handleClick(result){
  if(history.length<6){ addHistory(result); if(history.length===6)makePrediction(); return; }
  if(result==="Tie"){ addHistory(result); return; }
  if(result===aiPrediction){ bankroll+=currentBet;cumulativeLoss=0;lossStreak=0;winCount++; addHistory(result,"win"); if(bankroll>=targetProfit){ bankrollMsg.textContent="ðŸŽ‰ Congratulations! You won and made profit! Click Reset to start again."; betButtons.forEach(b=>b.disabled=true); return; } } 
  else { bankroll-=currentBet;cumulativeLoss+=currentBet;lossStreak++; addHistory(result,"loss"); if(lossStreak>=maxLoss||bankroll<=0){ bankrollMsg.textContent="ðŸ˜¢ Max loss streak reached. Reset your game to try again."; betButtons.forEach(b=>b.disabled=true); currentBet=0;updateNextBet(); return; } }
  currentBet=calculateNextBet(); updateBankroll(); updateNextBet(); makePrediction();
}

btnPlayer.onclick=()=>handleClick("Player");
btnBanker.onclick=()=>handleClick("Banker");
btnTie.onclick=()=>handleClick("Tie");
document.querySelector(".btn-reset").onclick=resetGame;
</script>
</body>
</html>
