<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - Register Password</title>
<style>
body { font-family: Arial; padding: 50px; background: #111; color: #fff; }
input, select, button { padding: 10px; margin: 5px 0; }
.success { color: lime; font-weight: bold; }
</style>
</head>
<body>
<h1>Create Registration Password</h1>

<label>Password:</label><br>
<input type="text" id="password"><br>

<label>App:</label><br>
<select id="appSelect">
    <option value="viper-roulette">Viper Roulette</option>
    <option value="ai-card-counting">AI CARD COUNTING</option>
    <option value="baccarat-predictor">BACCARAT PREDICTOR</option>
    <option value="baccart-pro">Baccart PRO</option>
    <option value="gemini-ultra-vip">Gemini ULTRA VIP</option>
    <option value="google-ai-baccarat">Google AI Baccarat</option>
    <option value="visionwave-baccarat-pro">VisionWave Baccarat PRO</option>
    <option value="baccarat-analysis-ultra">Baccarat Analysis ULTRA</option>
    <option value="baccarat-zerotrace">Baccarat ZEROTRACE</option>
    <option value="ai-baccarat-trend">AI BACCARAT TREND</option>
</select><br>

<label>Expires in:</label><br>
<select id="expireSelect">
    <option value="5">5 minutes</option>
    <option value="10">10 minutes</option>
    <option value="15">15 minutes</option>
    <option value="60">1 hour</option>
    <option value="10080">7 days</option>
    <option value="21600">15 days</option>
    <option value="43200">30 days</option>
    <option value="0">LIFETIME</option>
</select><br>

<button id="createBtn">Create Password</button>
<p id="msg"></p>

<script type="module">
import { db, collection, addDoc, Timestamp } from './firebase.js';

const passwordInput = document.getElementById('password');
const appSelect = document.getElementById('appSelect');
const expireSelect = document.getElementById('expireSelect');
const createBtn = document.getElementById('createBtn');
const msg = document.getElementById('msg');

createBtn.addEventListener('click', async () => {
    const pw = passwordInput.value.trim();
    if(!pw) { msg.textContent = 'Password cannot be empty'; return; }

    const app = appSelect.value;
    const expireMinutes = Number(expireSelect.value);
    let expiresAt = null;
    if(expireMinutes > 0) {
        expiresAt = Timestamp.fromDate(new Date(Date.now() + expireMinutes*60*1000));
    }

    try {
        await addDoc(collection(db, 'memberPasswords'), {
            password: pw,
            app: app,
            expiresAt: expiresAt
        });
        msg.textContent = '✅ Successfully registered';
        msg.className = 'success';
        passwordInput.value = '';
    } catch(e) {
        console.error(e);
        msg.textContent = '❌ Error registering password';
        msg.className = '';
    }
});
</script>
</body>
</html>
